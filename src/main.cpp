#include <Arduino.h>
#include "Wire.h"
#include "I2CKeyPad.h"
#include <LiquidCrystal_I2C.h>


int i=0;
const uint8_t KEYPAD_ADDRESS = 0x27;
I2CKeyPad keyPad;
LiquidCrystal_I2C lcd(0x27, 20, 4);

/***************************************************************************
****************************************************************************
****************************************************************************
***************************************************************************/
char GET_KEY(void);




/***************************************************************************
****************************************************************************
****************************************************************************
***************************************************************************/
void setup()
{
  Serial.begin(115200);
  Serial.println(__FILE__);

  Wire.begin();
  Wire.setClock(100000);
  lcd.init();
  lcd.backlight();
  if (keyPad.begin(KEYPAD_ADDRESS) == false)
  {
    Serial.println("\nERROR: cannot communicate to keypad.\nPlease reboot.\n");
    while(1);
  }
}
/***************************************************************************
****************************************************************************
****************************************************************************
***************************************************************************/

void loop()
{
  lcd.setCursor(9,2);
  lcd.print(i++);
  delay(500);
}

/***************************************************************************
****************************************************************************
****************************************************************************
***************************************************************************/
char GET_KEY(void)
{
  char keys[] = "123A456B789C*0#DNF";  // N = Nokey, F = Fail
  uint8_t idx = keyPad.getKey();
  return keys[idx];
}
/***************************************************************************
****************************************************************************
****************************************************************************
***************************************************************************/